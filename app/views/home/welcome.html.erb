<!DOCTYPE html>
<html>
<head>
  <link href="https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.1.3.css" rel="stylesheet"/>
  <title>Timeasure Demo</title>
</head>

<body>
<h1>Timeasure</h1>
<h2>Transparent method-level wrapper for profiling purposes</h2>
<h3>Live demo</h3>

<%= button_to 'Test demonstrate_single', home_demonstrate_single_path, method: :post %>


<div id="keen-example-chart"></div>

<script src="https://d26b395fwzu5fz.cloudfront.net/keen-analysis-1.2.2.js" type="text/javascript"></script>
<script src="https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.1.3.js" type="text/javascript"></script>
<script type="text/javascript">
    var client = new Keen({
        projectId: "5a58dd74c9e77c0001d6906e",
        readKey: "FDBEBA98E86F9F460AB99E319F811004997A031B7F7EE29B5C012027FD34A6C65F79ED25B2CE19B22D7D6067199ABB9D29D600E126F09E7531467AD078A4DFF3C96AED0C1A58087F3BFBD1A606D6CEBCF2E4FC821CDCC54D107ABD605B09E781"
    });

    var chart = new Keen.Dataviz()
        .el("#keen-example-chart")
        .height(240)
        .title("All Methods Runtime Average")
        .type("linechart")
        .prepare();

    client
        .query("average", {
            event_collection: "measured_methods",
            group_by: ["method_path"],
            interval: "minutely",
            target_property: "runtime",
            timeframe: "this_5_minutes",
            timezone: "Asia/Istanbul"
        })
        .then(function (res) {
            chart.data(res).render();
        })
        .catch(function (err) {
            chart.message(err.message);
        });

</script>


<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header"><a class="navbar-brand" href="#"> Keen Dashboard </a></div>
    <ul class="nav navbar-nav navbar-right">
      <li><%= link_to 'All products' %></li>
    </ul>
  </div>
</nav>
<div class="container-fluid">
  <div id="alert-placeholder"></div>
  <div class="row">
    <div class="col-md-6" id="chart-wrapper"></div>
    <div class="col-md-6" id="pie-wrapper"></div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="col-md-6" id="total-wrapper"></div>
    </div>
  </div>
</div>


</body>
</html>
